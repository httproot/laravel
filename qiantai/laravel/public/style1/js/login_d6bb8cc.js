define("passport:page/login/login",["require","exports","module","common:widget/oui/lib/jquery/1.9.1/jquery","common:widget/oui/rsa/index","common:widget/oui/widgets/widgets","common:widget/oui/lib/handlebars/1.0.0/handlebars","common:widget/oui/lib/mailSuggest/0.0.1/mailSuggest","common:widget/ui/utils/utils"],function(e,i,o){function t(){function e(e){var i=n("#j_username"),o={};o.left=i.offset().left,o.top=i.offset().top+i.innerHeight(),e.css({left:o.left,top:o.top,absolute:"position"})}function i(e,i){var o=c.find(".cur"),t=o.index(),n=c.find("li").length;"down"==i?(t++,t>n-1&&(t=0),c.find("li").removeClass("cur").eq(t).addClass("cur")):"up"==i?(t--,0>t&&(t=n-1),c.find("li").removeClass("cur").eq(t).addClass("cur")):"enter"==i&&(e.val(o.text()).blur(),c.hide(),d.trigger("focus"))}var o=s.Form,t=new a,u=n("#j_username"),d=n("#J_pass_input"),c=n('<div class="suggest" id="suggest"></div>').appendTo(n("body"));n("#rememberme").length&&o.ui.init(),e(c);var m=n("#email-suggest-template").html(),g=l.compile(m);o.validate({target:"#login",before:function(){o.randImage(),n("#refreshCode").click(function(){n("#randImage").trigger("click")})},inputTheme:!0,showSingleError:!0,validateData:{onkeyup:!1,showErrors:function(e,i){var o=n("#allError");o.length?(n("#login").find("input").each(function(){n(this).removeClass("error")}),o.html(""),i.length&&(o.html(i[0].message),n(i[0].element).addClass("error"))):this.defaultShowErrors()},submitHandler:function(e){d.val(r(d.val())),e.submit()}}}),u.on("keyup",function(o){e(c);var r=n(this).val();switch(o.keyCode){case 38:i(n(this),"up");break;case 40:i(n(this),"down");break;case 13:i(n(this),"enter");break;default:if(!r.length)return void c.hide();var s=t.run(r);/^\d{1,}$/g.test(r)&&(s.remove=!0);var l=g(s);c.html(l).show().find("li").eq(0).addClass("cur")}}).on("keydown",function(e){13==e.keyCode&&e.preventDefault()}).on("focusout",function(){setTimeout(function(){c.hide()},500)}),n(window).on("resize",function(){e(c)}),c.on("mouseenter","li",function(){n(this).addClass("cur")}).on("mouseleave","li",function(){n(this).removeClass("cur").siblings().removeClass("cur")}).on("click","li",function(){i(u,"enter"),d.trigger("focus")}),n("#randCode").keyup(function(){var e=n(this).val();e.length&&n.get("/account/checkCode.action?j_code="+e+"&code="+e,function(e){"true"==e.result?(n(".validCode").show(),n("#allError").hide()):(n(".validCode").hide(),n("#allError").show())})}),n(".partner").length&&n(".partner").hover(function(){n(this).addClass("hover")},function(){n(this).removeClass("hover")}),n("body")[0].scrollTop=0,u.val()&&d.focus()}var n=e("common:widget/oui/lib/jquery/1.9.1/jquery"),r=e("common:widget/oui/rsa/index"),s=e("common:widget/oui/widgets/widgets"),l=e("common:widget/oui/lib/handlebars/1.0.0/handlebars"),a=e("common:widget/oui/lib/mailSuggest/0.0.1/mailSuggest"),u=(e("common:widget/ui/utils/utils"),{init:t});o.exports=u});